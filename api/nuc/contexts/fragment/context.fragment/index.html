<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Context Fragment | D2 SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="http://d2sv-sdk.github.io/api/nuc/contexts/fragment/context.fragment/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Context Fragment | D2 SDK"><meta data-react-helmet="true" name="description" content="The context fragment can be used to fetch data for a dynamically added widget, instead of fetching the whole context, which would re-fetch data for widget created earlier."><meta data-react-helmet="true" property="og:description" content="The context fragment can be used to fetch data for a dynamically added widget, instead of fetching the whole context, which would re-fetch data for widget created earlier."><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://d2sv-sdk.github.io/api/nuc/contexts/fragment/context.fragment/"><link data-react-helmet="true" rel="alternate" href="http://d2sv-sdk.github.io/api/nuc/contexts/fragment/context.fragment/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://d2sv-sdk.github.io/api/nuc/contexts/fragment/context.fragment/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8015cfa5.css">
<link rel="preload" href="/assets/js/runtime~main.90632f58.js" as="script">
<link rel="preload" href="/assets/js/main.0ea3aa5d.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/images/icon.png" alt="D2 SDK Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/images/icon.png" alt="D2 SDK Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">D2 SDK</b></a><a class="navbar__item navbar__link" href="/general/architecture/">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/api_overview/">API</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/api_overview/">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Nucleus</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">contexts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/api/nuc/contexts/context/">Context</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">fragment</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/api/nuc/contexts/fragment/context.fragment/">Context Fragment</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">page</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/api/nuc/contexts/synchronized.context/">SynchronizedContext</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">lib</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">models</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">utils</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">D2 Smart View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/d2rest/">D2-REST</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dctm-rest/">DCTM-REST</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/d2fs/">D2FS</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dfc/">DFC</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Context Fragment</h1></header><p>The context fragment can be used to fetch data for a dynamically added widget, instead of fetching the whole context, which would re-fetch data for widget created earlier.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// Subscribe a context fragment to the context, before</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// a new widget is constructed and rendered.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contextFragment = new ContextFragment(context);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create the widget and render it to get the new models</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// added to the context and to the context fragment too.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Fetch only the new models. The new widget will update</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// the displayed information as it is needed.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contextFragment.fetch();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Unsubscribe the context fragment from the context,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// when it is not needed any more.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contextFragment.destroy() // Unsubscribe the fragment.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="details"></a>Details<a class="hash-link" href="#details" title="Direct link to heading">#</a></h2><p>The context supports two scenarios for changing the page content:</p><ul><li>refresh  - the page (views) will be reused, only the data will be reloaded</li><li>exchange - the page will be rebuilt (current views will be destroyed and new
ones will be created) and new data wil be loaded</li></ul><p>There is one more scenario, which you may see on the page:</p><ul><li>grow     - new content (views) will be added to the page, which needs to
load a new data, but the old data do not need to be reloaded</li></ul><p>New views usually load the new data by <code>ensureFetched</code> and the context does not
need to be involved in fetching the data. However, shared components might be
used to add the new content, which depend in the context to load their data.
Because only the owning view knows what part of the context will have to be
fetched, it is responsible for collecting a fragment of factories for fetching:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// render a new page</span></span><span class="token-line" style="color:#393A34"><span class="token plain">context.getObject(...) // get objects from the context</span></span><span class="token-line" style="color:#393A34"><span class="token plain">context.fetch()        // fetch collected factories</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// work with the page   &lt;--------------------------------+</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// introduce new content to the page                     |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">new ContextFragment(context) // remember new objects     |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">context.getObject(...)       // add other objects        |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contextFragment.fetch()      // load new data            |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contextFragment.destroy()    // stop context watching  --+</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>No factories are removed, when a context fragment is fetched and destroyed:</p><table><thead><tr><th align="center">operation / flag</th><th align="center">refresh (fetch)</th><th align="center">exchange (clear + fetch)</th><th align="center">grow (fragment fetch + destroy)</th></tr></thead><tbody><tr><td align="center">permanent</td><td align="center">stay</td><td align="center">stay</td><td align="center">stay</td></tr><tr><td align="center">normal</td><td align="center">stay</td><td align="center">drop</td><td align="center">stay</td></tr><tr><td align="center">temporary</td><td align="center">drop</td><td align="center">drop</td><td align="center">stay</td></tr></tbody></table><p>The fetchability of factories follows the rules which the context declared.
In addition to the static rules below, the actual fetchability is checked by
the <code>isFetchable</code> method of the context:</p><table><thead><tr><th align="center">method / flag</th><th align="center">fetch</th><th align="center">fragment fetch</th></tr></thead><tbody><tr><td align="center">permanent</td><td align="center">allowed</td><td align="center">allowed</td></tr><tr><td align="center">normal</td><td align="center">allowed</td><td align="center">allowed</td></tr><tr><td align="center">temporary</td><td align="center">N/A (*)</td><td align="center">forbidden</td></tr><tr><td align="center">detached</td><td align="center">forbidden</td><td align="center">forbidden</td></tr></tbody></table><p>(*) Temporary factories are removed from the context when the <code>fetch</code> method
starts executing. It does not make sense to discuss their fetchability.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="methods"></a>Methods<a class="hash-link" href="#methods" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="constructorcontext"></a>constructor(context)<a class="hash-link" href="#constructorcontext" title="Direct link to heading">#</a></h3><p>Start watching the original context for new factories.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="fetchoptions-promise"></a>fetch(options): Promise<a class="hash-link" href="#fetchoptions-promise" title="Direct link to heading">#</a></h3><p>Fetches all objects in the context fragment, which are fetchable by their
originating context.  The options will be passed to the <code>fetch</code> methods in
factories that take care of the fetchable objects.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="clear-void"></a>clear(): void<a class="hash-link" href="#clear-void" title="Direct link to heading">#</a></h3><p>Discards all objects from the context fragment. The context fragment
remains subscribed to the context.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="destroy-void"></a>destroy(): void<a class="hash-link" href="#destroy-void" title="Direct link to heading">#</a></h3><p>Stops watching the original context for new factories. The context fragment
will not be usable any more.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="properties"></a>Properties<a class="hash-link" href="#properties" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="fetching-promise"></a>fetching: Promise?<a class="hash-link" href="#fetching-promise" title="Direct link to heading">#</a></h3><p>The promise returned by <code>fetch</code> during fetching or <code>null</code> if no fetching is
in progress.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="fetched-boolean"></a>fetched: boolean<a class="hash-link" href="#fetched-boolean" title="Direct link to heading">#</a></h3><p><code>true</code> if the most recent <code>fetch</code> succeeded, <code>false</code> if the context has not
been fetched yet, or fetching is in progress, or it failed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="error-error"></a>error: Error<a class="hash-link" href="#error-error" title="Direct link to heading">#</a></h3><p><code>null</code> if the most recent <code>fetch</code> succeeded, or fetching is in progress, or
the context has not been fetched yet, an instance of <code>Error</code> if the most
recent <code>fetch</code> failed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="request-context"></a>&#x27;request&#x27;, context<a class="hash-link" href="#request-context" title="Direct link to heading">#</a></h3><p>The context fragment is going to be fetched. This event is triggered on the
original context too. The <code>fetching</code>, <code>fetched</code> and <code>error</code> properties on the
original context are not modified.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="sync-context"></a>&#x27;sync&#x27;, context<a class="hash-link" href="#sync-context" title="Direct link to heading">#</a></h3><p>Fetching the context fragment succeeded. This event is triggered on the
original context too. The <code>fetching</code>, <code>fetched</code> and <code>error</code> properties on the
original context are not modified.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="error-error-context"></a>&#x27;error&#x27;, error, context<a class="hash-link" href="#error-error-context" title="Direct link to heading">#</a></h3><p>Fetching the context fragment failed. This event is triggered on the original
context too. The <code>fetching</code>, <code>fetched</code> and <code>error</code> properties on the original
context are not modified.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="addfactory-context-propertyname-factory"></a>&#x27;add:factory&#x27;, context, propertyName, factory<a class="hash-link" href="#addfactory-context-propertyname-factory" title="Direct link to heading">#</a></h3><p>A new factory has been added to the context fragment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="beforeclear-context"></a>&#x27;before:clear&#x27;, context<a class="hash-link" href="#beforeclear-context" title="Direct link to heading">#</a></h3><p>The context fragment is going to be cleared.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="clear-context"></a>&#x27;clear&#x27;, context<a class="hash-link" href="#clear-context" title="Direct link to heading">#</a></h3><p>The context fragment has been cleared.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="destroy-context"></a>&#x27;destroy&#x27;, context<a class="hash-link" href="#destroy-context" title="Direct link to heading">#</a></h3><p>The context fragment has been destroyed.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/api/nuc/contexts/context/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Context</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/api/nuc/contexts/page/page.context/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PageContext Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#details" class="table-of-contents__link">Details</a></li><li><a href="#methods" class="table-of-contents__link">Methods</a><ul><li><a href="#constructorcontext" class="table-of-contents__link">constructor(context)</a></li><li><a href="#fetchoptions-promise" class="table-of-contents__link">fetch(options): Promise</a></li><li><a href="#clear-void" class="table-of-contents__link">clear(): void</a></li><li><a href="#destroy-void" class="table-of-contents__link">destroy(): void</a></li></ul></li><li><a href="#properties" class="table-of-contents__link">Properties</a><ul><li><a href="#fetching-promise" class="table-of-contents__link">fetching: Promise?</a></li><li><a href="#fetched-boolean" class="table-of-contents__link">fetched: boolean</a></li><li><a href="#error-error" class="table-of-contents__link">error: Error</a></li></ul></li><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#request-context" class="table-of-contents__link">&#39;request&#39;, context</a></li><li><a href="#sync-context" class="table-of-contents__link">&#39;sync&#39;, context</a></li><li><a href="#error-error-context" class="table-of-contents__link">&#39;error&#39;, error, context</a></li><li><a href="#addfactory-context-propertyname-factory" class="table-of-contents__link">&#39;add:factory&#39;, context, propertyName, factory</a></li><li><a href="#beforeclear-context" class="table-of-contents__link">&#39;before:clear&#39;, context</a></li><li><a href="#clear-context" class="table-of-contents__link">&#39;clear&#39;, context</a></li><li><a href="#destroy-context" class="table-of-contents__link">&#39;destroy&#39;, context</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Open Text. All rights reserved. Trademarks owned by Open Text.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.90632f58.js"></script>
<script src="/assets/js/main.0ea3aa5d.js"></script>
</body>
</html>